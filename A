local Client = require(game.ReplicatedStorage.Library.Client)
local Library = require(game.ReplicatedStorage.Library)
local Orbs = getsenv(game.Players.LocalPlayer.PlayerScripts.Scripts.Game.Orbs)

debug.setupvalue(Client.Network.Invoke, 1, function() return true end)
debug.setupvalue(Client.Network.Fire, 1, function() return true end)

function GetDiamonds(Area)
    local Diamonds = {}
    for i,v in next, Client.Network.Invoke('Get Diamonds') do 
        if v.a == Area then 
            Diamonds[i] = v
        end 
    end 
    return Diamonds
end 

function GetPets()
    return Client.PetCmds.GetEquipped() 
end 

for i,v in pairs(workspace.__THINGS.Orbs:GetChildren()) do 
    Orbs.Collect(v)
end 

workspace.__THINGS.Orbs.ChildAdded:Connect(function(v)
    Orbs.Collect(v)
end)

while true do 
    if _G.AutoFarm then
        local Pets = GetPets()
        local Diamonds = GetDiamonds(_G.Area or 'Diamond Mine')
        for i,v in next, Diamonds do
            if workspace.__THINGS.Coins:FindFirstChild(i) and _G.AutoFarm then 
                for _,Pet in next, Pets do 
                    spawn(function()
                        if _G.AutoFarm then
                            Client.Network.Invoke('Join Diamond', i, {Pet.uid})
                            Client.Network.Fire('Farm Diamond', i, Pet.uid)
                        end
                    end)
                end 
            end 
            repeat task.wait() until not workspace.__THINGS.Coins:FindFirstChild(i)
        end 
        task.wait()
    end
    task.wait()
end 
